┌────────────────────────────────────────────────────────────────────────┐
│                          RAGEcommerce Architecture                     │
└────────────────────────────────────────────────────────────────────────┘

┌────────────────────────┐     ┌────────────────────────────────────────┐
│      API Endpoints     │     │              Models                    │
│                        │     │                                        │
│  ┌─────────────────┐   │     │  ┌───────────────┐  ┌───────────────┐  │
│  │    /health      │   │     │  │   Product     │  │  UserQuery    │  │
│  └─────────────────┘   │     │  │ - Id          │  │ - Question    │  │
│  ┌─────────────────┐   │     │  │ - Name        │  └───────────────┘  │
│  │ /api/rag/init   │   │     │  │ - Description │                     │
│  └─────────────────┘   │     │  └───────────────┘                     │
│  ┌─────────────────┐   │     └────────────────────────────────────────┘
│  │ /api/products   │   │
│  └─────────────────┘   │     ┌────────────────────────────────────────┐
│  ┌─────────────────┐   │     │            Services                    │
│  │ /api/rag/query  │   │     │                                        │
│  └─────────────────┘   │     │  ┌─────────────────┐  ┌───────────────┐│
└────────────────────────┘     │  │ProductCatalog   │  │Embedding      ││ 
                               │  │         Service │  │        Service││
                               │  └────────┬────────┘  └───────┬───────┘│
                               └───────────┼─────────────────────┼──────┘
                                           │                     │
┌────────────────────────┐     ┌───────────▼─────────────────────▼──────┐
│    Infrastructure      │     │                                        │
│                        │     │  ┌───────────────┐  ┌───────────────┐  │
│  ┌─────────────────┐   │     │  │ QdrantIndexer │  │  ChatService  │  │
│  │  QdrantClient   │◄──┼─────┼─►│               │  │               │  │
│  │                 │   │     │  └───────┬───────┘  └───────┬───────┘  │
│  └─────────────────┘   │     └──────────┼────────────────┬─┼──────────┘
│                        │                │                │ │
│  ┌─────────────────┐   │     ┌──────────┼────────────────▼─▼──────────┐
│  │     Kernel      │◄──┼─────┼─►        │                             │
│  │ (Semantic       │   │     │          ▼                             │
│  │  Kernel)        │   │     │    Microsoft Semantic Kernel           │
│  └─────────────────┘   │     │  (AI/ML Framework for RAG Pipeline)    │
│                        │     │                                        │
│  ┌─────────────────┐   │     └────────────────────────────────────────┘
│  │    Phi-3        │◄──┤
│  │  ONNX Runtime   │   │
│  └─────────────────┘   │
└────────────────────────┘

┌────────────────────────────────────────────────────────────────────────┐
│                      Retrieval Augmented Generation Flow               │
│                                                                        │
│  1. User Query → EmbeddingService → Generate Embedding Vector          │
│  2. Query Vector → Qdrant Search → Retrieve Relevant Product Context   │
│  3. Context + Question → ChatService → Phi-3 Model → Generate Response │
└────────────────────────────────────────────────────────────────────────┘
